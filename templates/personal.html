<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="../static/css/own.css"/>
		<script type="text/javascript" src="../static/js/jquery-3.3.1.js"></script>
		<script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
		<title>个人中心</title>
		<style type="text/css">
			body{
				margin: 100px;
			}
			.list{
				margin: 20px;
			}
			ul{
				padding: 0;
			}
			li{
				list-style-type: none;
				margin: 10px ;
				padding: 0;
			} 
			a{
				text-decoration: none;
				color: #000000;				
			}	
			a:hover{
				text-decoration: none;
			}
			td{
				border-bottom-width: 1px;
				border-top-style: none;
				border-bottom-style: solid;
				border-bottom-color: #FFFFFF;
			}
			#personal{
				display: inline;
			}
		</style>
		
	</head>
	<body background="../static/Wopop_files/login_bgx.gif">
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <!--导航栏-->
			<div class="container">
				<div class="navbar-header">
					<a href="../main" class="navbar-brand">校园失物招领平台</a>
				</div>

                <!-- 登陆按钮-->
                {% if user %}
                    {# 若用户已登陆：显示用户名+退出按钮 #}
                    <div id="sign_out" align="right" >
                        你好,
                        <a href="/profile/0" >
                            {# 点击此处可以进入用户个人中心 #}
                            {{ user.name }}({{ user.sno }})
                        </a>

                        <a href="../quit"><input type="button" class="sub_button" name="quit" id="button" value="退出" style="opacity: 0.7;" ></a>
                    </div>
                {% else %}
                    {# 若没有登陆：显示登陆按钮 #}
                    <div id="sign_in" align="right">
                        <a href="../login"><input type="button" class="sub_button" name="login" id="button" value="登录" style="opacity: 0.7;" ></a>
                    </div>

                {% endif %}

			</div>		
		</nav>
		
		<div class="container">
			<div class="start" style="text-align: center;">
				<h2>个人中心</h2>
			</div>
		</div>	
		
		<div class="container" style="background-color: #C6C8CA;min-height: 500px; width: 670px;">
			<div class="row clearfix" style="margin-top: 50px;">
				<div class="col-md-12 ">
					<ul class="nav nav-tabs">
						<li class="active">
							<a href="#">个人信息</a>
						</li>
						<li>
							<a href="#">我的失物招领</a>
						</li>
						<li>
							<a href="#">我的寻物启事</a>
						</li>
                        {% if user.tag %}
                            {# tag = True 用户是管理员 才有审核功能 #}
						<li>
							<a href="#">审核</a>
						</li>
                        {% endif %}
					</ul>	
				</div>	
			</div>
            <form action="" method="POST">
			    <div class="content">
					<div class="list" >    <!--个人信息-->
						<p>姓名：{{ user.name }}</p>
						<p>学号：{{ user.sno }}</p>
						<p>电话：{{ user.phone }}</p>
						<p>邮箱：{{ user.email }}</p>
					</div>
					<div class="list" style="display: none;" >    <!--失物信息-->
                        {% if lost_no_history %}
                            {# 用户没有失物历史记录 #}
                            <p>您还没有发布过任何失物信息。</p>
                        {% else %}
                            <ul>
                            {% for obj in lostobjs %}
                                {# 超链接 object/20位长度id #}
                                <li>
                                    <input type="checkbox" name="object" value={{obj.id}} />
                                    <a href={% url 'object' obj.id %}>
                                    失物信息:【{{obj.name}}】【物品编号：{{obj.id}}】
                                    </a>

                                </li>
                                {% if obj.state == 0%}<p>未审核</p>
                                {% elif obj.state == 1%}<p>未完成</p>
                                {% elif obj.state == 2%}<p>已完成</p>
                                {% else %}<p>未通过审核</p>
                                {% endif %}
                            {% endfor %}
                            </ul>
                            <div style="margin:180px auto 0 auto;width: 160px;">
                                <input class="btn btn-default" type="submit" name="delete" value="删除" />
                                <button class="btn btn-primary btn-lg" type="button" data-toggle="modal" data-target="#myModal">完成</button>
                            </div>
                            <!--上面要加上type="button" 不然对话框只是一闪而过 -->
                        {% endif %}
                        <!--
						<div style="margin:180px auto 0 auto;width: 160px;">
							<button type="button" class="btn btn-default" id="">完成</button>
							<button type="button" class="btn btn-default" id="">删除</button>
						</div>
						-->
					</div>
					<div class="list" style="display: none;">     <!--招领信息-->
                        {% if found_no_history %}
                            {# 用户没有失物历史记录 #}
                            <p>您还没有发布过任何失物信息。</p>
                        {% else %}
                            <ul>
                            {% for obj in foundobjs %}
                                {# 超链接 object/20位长度id #}
                                <li>
                                    <input type="checkbox" name="object" value={{obj.id}} />
                                    <a href={% url 'object' obj.id %}>
                                    失物信息:【{{obj.name}}】【物品编号：{{obj.id}}】
                                    </a>

                                </li>
                                {% if obj.state == 0%}<p>未审核</p>
                                {% elif obj.state == 1%}<p>未完成</p>
                                {% elif obj.state == 2%}<p>已完成</p>
                                {% else %}<p>未通过审核</p>
                                {% endif %}
                            {% endfor %}
                            </ul>
                            <div style="margin:180px auto 0 auto;width: 160px;">
                                <input class="btn btn-default" type="submit" name="delete" value="删除" />
                                <button class="btn btn-primary btn-lg" type="button" data-toggle="modal" data-target="#myModal">完成</button>
                            </div>
                            <!--上面要加上type="button" 不然对话框只是一闪而过 -->
                        {% endif %}
                        <!--
						<div style="margin:180px auto 0 auto;width: 160px;">
							<button type="button" class="btn btn-default" id="">完成</button>
							<button type="button" class="btn btn-default" id="">删除</button>
						</div>
						-->
					</div>

					<div class="list" style="display: none;">      <!--审核-->
                        {# 审核功能 #}
                        {% if review_no_history %}
                            <p>目前无待审核的物品</p>
                        {% else %}
                            <table class="table">
                            {% for obj in obj_review %}
                            <tr>
                                <td>
                                    <a href="{% url 'object' obj.id %}">【{{obj.id}}】【{{obj.name}}】</a>
                                </td>
                            </tr>
                                {# value={{obj.id}}注意和后面的/隔开,不然value的值后面会加上/ #}
                            {% endfor %}
                            </table>
                        {% endif %}
					</div>
                </div>

                <!-- 模态框（Modal） -->

                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="myModalLabel">请输入对方学号</h4>
                            </div>
                            <div class="modal-body">
                                学号<input type="text" name="finish_id" value="" />
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                <input type="submit" name="finish" class="btn btn-primary" value="提交" />
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal -->
                </div>
            </form>
		</div>

		
		<script type="text/javascript">
 			$(function(){
 				$(".nav-tabs li").click(function(){
 					var divShow = $(".content").children('.list');
 					if(!$(this).hasClass('active')){
 						var index=$(this).index();
 						$(this).addClass('active').siblings('li').removeClass('active');
 						$(divShow[index]).show();
 						$(divShow[index]).siblings('.list').hide();
 					}
 				});
 			});	
		</script>
		
	
	</body>
</html>
